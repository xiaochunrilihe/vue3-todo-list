var M=Object.defineProperty,$=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var D=(e,o,t)=>o in e?M(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,I=(e,o)=>{for(var t in o||(o={}))q.call(o,t)&&D(e,t,o[t]);if(S)for(var t of S(o))z.call(o,t)&&D(e,t,o[t]);return e},b=(e,o)=>$(e,G(o));import{e as h,l as p,m as C,H as i,y as c,x as m,E as O,F as k,G as Q,O as W,a0 as X,I as L,a1 as Y,a2 as Z,B as x,a3 as ee}from"./@vue-b8e98f59.js";import{E,a as N,b as y,c as oe,d as te,e as ne,f,g as w,h as se,i as de,j as le,k as ae}from"./element-plus-4dc3b259.js";import{u as g,c as re}from"./vuex-3c740ebb.js";import{e as B,p as ce}from"./@element-plus-e5e33eb6.js";import"./@vueuse-080c4d7d.js";import"./lodash-es-7b7b3318.js";import"./@ctrl-eb0b847c.js";const ie=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}};ie();var v=(e,o)=>{const t=e.__vccOpts||e;for(const[n,s]of o)t[n]=s;return t};const ue={name:"Footer",props:{checkAll:Boolean,isIndeterminate:Boolean,updateState:Function},emits:["update:checkAll","update:isIndeterminate"],setup(e,{emit:o}){const t=g(),n=h(!1);return{Delete:B,checked:n,checkAllTodo:a=>{t.dispatch("todos/checkAll",a),o("update:checkAll",a),o("update:isIndeterminate",!1)},reverseCheck:()=>{t.dispatch("todos/reverseCheck"),e.updateState(t,o)},clearAllDone:()=>{t.dispatch("todos/clearAllDone"),e.updateState(t,o)}}}},_e={class:"footer-wrapper"},pe=k("\u5168\u9009 "),me=k("\u53CD\u9009");function fe(e,o,t,n,s,l){const d=E,a=N,r=y;return p(),C("div",_e,[i(d,{border:"","model-value":t.checkAll,indeterminate:t.isIndeterminate,onChange:n.checkAllTodo},{default:c(()=>[pe]),_:1},8,["model-value","indeterminate","onChange"]),i(d,{modelValue:n.checked,"onUpdate:modelValue":o[0]||(o[0]=u=>n.checked=u),border:"",onChange:n.reverseCheck},{default:c(()=>[me]),_:1},8,["modelValue","onChange"]),i(a,{title:`\u5DF2\u5B8C\u6210 ${e.$store.getters["todos/doneTodosLen"]} / \u5168\u90E8 ${e.$store.getters["todos/todosLen"]}`,type:"info",closable:!1},null,8,["title"]),e.$store.getters["todos/isDone"]?(p(),m(r,{key:0,class:"todo-del-icon",type:"danger",icon:n.Delete,circle:"",onClick:n.clearAllDone},null,8,["icon","onClick"])):O("",!0)])}var j=v(ue,[["render",fe],["__scopeId","data-v-036c5340"]]);const he={name:"Item",props:{todo:{type:Object,default:()=>({})}},setup(){const e=g();return{deleteTodo:t=>{e.commit({type:"todos/deleteTodo",id:t})},Delete:B}}};function ke(e,o,t,n,s,l){const d=y,a=E;return p(),m(a,{label:t.todo.id},{default:c(()=>[k(Q(t.todo.name)+" ",1),t.todo.done?(p(),m(d,{key:0,class:"todo-del-icon",type:"danger",icon:n.Delete,circle:"",onClick:o[0]||(o[0]=W(()=>n.deleteTodo(t.todo.id),["stop"]))},null,8,["icon"])):O("",!0)]),_:1},8,["label"])}var R=v(he,[["render",ke],["__scopeId","data-v-9f10dc42"]]);const ge={name:"List",components:{Item:R},props:{todos:Array,checkAll:Boolean,isIndeterminate:Boolean},emits:["update:checkAll","update:isIndeterminate"],setup(e,{emit:o}){const t=g();return{handleCheckedChange:s=>{t.commit("todos/updateTodo",{doneTodos:s});const l=s.length;o("update:checkAll",l===e.todos.length),o("update:isIndeterminate",l>0&&l<e.todos.length)}}}};function ve(e,o,t,n,s,l){const d=R,a=oe;return p(),m(a,{"model-value":e.$store.state.todos.doneTodos,onChange:n.handleCheckedChange},{default:c(()=>[(p(!0),C(L,null,X(t.todos,r=>(p(),m(d,{key:r.id,todo:r},null,8,["todo"]))),128))]),_:1},8,["model-value","onChange"])}var U=v(ge,[["render",ve],["__scopeId","data-v-38a767d2"]]);const ye={name:"Header",props:{checkAll:Boolean,isIndeterminate:Boolean,updateState:Function},emits:["update:checkAll","update:isIndeterminate"],setup(e,{emit:o}){const t=g(),n=h(""),s=async d=>{if(t.getters["todos/todosLen"]>=10){f.closeAll(),f.warning("\u6700\u591A\u53EF\u6DFB\u52A0 10 \u4E2A"),n.value="";return}if(d.trim()===""){f.closeAll(),f.warning("\u8F93\u5165\u9879\u4E0D\u80FD\u4E3A\u7A7A");return}if(await t.dispatch("todos/checkName",d)){f.closeAll(),f.warning("\u8F93\u5165\u9879\u4E0D\u80FD\u91CD\u590D");return}const r={id:String(new Date().valueOf()),name:d,done:!1};t.commit({type:"todos/addTodo",todoObj:r}),e.updateState(t,o),n.value=""};return{Plus:ce,todo:n,handleKeyUp:d=>{const{keyCode:a,target:r}=d,{value:u}=r;a===13&&s(u)},updateTodo:s}}},Ae=e=>(Y("data-v-8b44dbee"),e=e(),Z(),e),Te=Ae(()=>x("svg",{viewBox:"0 0 16 16",color:"#fff"},[x("path",{"fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59c.4.07.55-.17.55-.38c0-.19-.01-.82-.01-1.49c-2.01.37-2.53-.49-2.69-.94c-.09-.23-.48-.94-.82-1.13c-.28-.15-.68-.52-.01-.53c.63-.01 1.08.58 1.23.82c.72 1.21 1.87.87 2.33.66c.07-.52.28-.87.51-1.07c-1.78-.2-3.64-.89-3.64-3.95c0-.87.31-1.59.82-2.15c-.08-.2-.36-1.02.08-2.12c0 0 .67-.21 2.2.82c.64-.18 1.32-.27 2-.27c.68 0 1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82c.44 1.1.16 1.92.08 2.12c.51.56.82 1.27.82 2.15c0 3.07-1.87 3.75-3.65 3.95c.29.25.54.73.54 1.48c0 1.07-.01 1.93-.01 2.2c0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z",fill:"currentColor"})],-1)),Ie=k("\u6DFB\u52A0");function be(e,o,t,n,s,l){const d=te,a=N,r=y,u=ne,A=w;return p(),m(A,{"body-style":{padding:"10px"}},{default:c(()=>[i(a,{center:"",closable:!1,effect:"dark",title:"vue3-todo-list",type:"success"},{default:c(()=>[i(d,{underline:!1,href:"https://github.com/sg996/vue3-todo-list"},{default:c(()=>[Te]),_:1})]),_:1}),i(u,{modelValue:n.todo,"onUpdate:modelValue":o[1]||(o[1]=T=>n.todo=T),disabled:e.$store.getters["todos/todosLen"]>=10,maxlength:"20",placeholder:"\u6700\u5927\u957F\u5EA620\uFF0C\u56DE\u8F66\u8FDB\u884C\u6DFB\u52A0",onKeyup:n.handleKeyUp},{append:c(()=>[i(r,{icon:n.Plus,onClick:o[0]||(o[0]=()=>n.updateTodo(n.todo))},{default:c(()=>[Ie]),_:1},8,["icon"])]),_:1},8,["modelValue","disabled","onKeyup"])]),_:1})}var V=v(ye,[["render",be],["__scopeId","data-v-8b44dbee"]]);const Ce={name:"App",components:{Header:V,List:U,Footer:j},setup(){const e=g(),o=h(!1),t=h(!0),n=h(!1);return{checkAll:o,isIndeterminate:t,isReset:n,handleResetAndRefresh:async()=>{o.value=!1,t.value=!0,n.value=!0,n.value=await e.dispatch("todos/resetTodos")},updateState:(d,a)=>{const r=d.getters["todos/todosLen"],u=d.getters["todos/doneTodosLen"];a("update:checkAll",u===r),a("update:isIndeterminate",u>0&&u<r)}}}},Se=k("\u91CD\u7F6E\u5237\u65B0");function De(e,o,t,n,s,l){const d=V,a=U,r=se,u=j,A=y,T=de,K=w,P=le,H=ae;return p(),m(H,{justify:"center"},{default:c(()=>[i(P,{xs:24,sm:10,md:10,lg:10},{default:c(()=>[i(d,{checkAll:n.checkAll,"onUpdate:checkAll":o[0]||(o[0]=_=>n.checkAll=_),isIndeterminate:n.isIndeterminate,"onUpdate:isIndeterminate":o[1]||(o[1]=_=>n.isIndeterminate=_),updateState:n.updateState},null,8,["checkAll","isIndeterminate","updateState"]),i(K,{"body-style":{padding:"10px"}},{default:c(()=>[e.$store.state.todos.todos.length!==0?(p(),C(L,{key:0},[i(a,{todos:e.$store.state.todos.todos,checkAll:n.checkAll,"onUpdate:checkAll":o[2]||(o[2]=_=>n.checkAll=_),isIndeterminate:n.isIndeterminate,"onUpdate:isIndeterminate":o[3]||(o[3]=_=>n.isIndeterminate=_)},null,8,["todos","checkAll","isIndeterminate"]),i(r,{style:{margin:"10px 0"}}),i(u,{checkAll:n.checkAll,"onUpdate:checkAll":o[4]||(o[4]=_=>n.checkAll=_),isIndeterminate:n.isIndeterminate,"onUpdate:isIndeterminate":o[5]||(o[5]=_=>n.isIndeterminate=_),updateState:n.updateState},null,8,["checkAll","isIndeterminate","updateState"])],64)):(p(),m(T,{key:1},{description:c(()=>[]),default:c(()=>[i(A,{type:"primary",loading:n.isReset,onClick:n.handleResetAndRefresh},{default:c(()=>[Se]),_:1},8,["loading","onClick"])]),_:1}))]),_:1})]),_:1})]),_:1})}var Oe=v(Ce,[["render",De]]);const F=[{id:"1638256190206",name:"\u6572\u4EE3\u7801",done:!0},{id:"1638256191770",name:"\u6574\u7406\u7B14\u8BB0",done:!1},{id:"1638256193996",name:"\u5403\u996D",done:!1}],J=["1638256190206"],Le={todos:JSON.parse(JSON.stringify(F)),doneTodos:JSON.parse(JSON.stringify(J))},xe={todosLen:e=>e.todos.length,doneTodosLen:e=>e.doneTodos.length,isDone:e=>e.todos.some(o=>o.done)},Ee={updateDoneTodos(e){e.doneTodos=e.todos.reduce((o,t)=>(t.done&&o.push(t.id),o),[])},addTodo(e,{todoObj:o={}}){e.todos.unshift(o)},updateTodo(e,{doneTodos:o=[]}){e.doneTodos=o,e.todos=Array.from(e.todos,t=>b(I({},t),{done:o.includes(t.id)}))},deleteTodo(e,{id:o}){e.todos=e.todos.filter(t=>t.id!==o),e.doneTodos.splice(e.doneTodos.indexOf(o),1)},checkAllTodo(e,o){e.todos=Array.from(e.todos,t=>b(I({},t),{done:o}))},reverseTodoDone(e){e.todos=e.todos.map(o=>(o.done=!o.done,o))},resetTodos(e){e.todos=JSON.parse(JSON.stringify(F)),e.doneTodos=JSON.parse(JSON.stringify(J))},clearAllDoneTodo(e){e.todos=e.todos.filter(o=>!o.done)}},Ne={checkName({state:e},o){return new Promise(t=>{t(e.todos.some(n=>n.name===o))})},checkAll({commit:e},o){e("checkAllTodo",o),e("updateDoneTodos")},reverseCheck({commit:e}){e("reverseTodoDone"),e("updateDoneTodos")},resetTodos({commit:e}){return new Promise(o=>{setTimeout(()=>{e("resetTodos"),o(!1)},1500)})},clearAllDone({commit:e}){e("clearAllDoneTodo"),e("updateDoneTodos")}};var we={namespaced:!0,state:Le,getters:xe,mutations:Ee,actions:Ne},Be=re({modules:{todos:we}});ee(Oe).use(Be).mount("#app");
